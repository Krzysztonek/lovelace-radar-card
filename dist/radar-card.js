function t(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const e=globalThis,n=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),r=new WeakMap;let o=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(n&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=r.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&r.set(e,t))}return t}toString(){return this.cssText}};const s=t=>new o("string"==typeof t?t:t+"",void 0,i),a=(t,...e)=>{const n=1===t.length?t[0]:e.reduce((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1],t[0]);return new o(n,t,i)},l=n?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return s(e)})(t):t,{is:c,defineProperty:h,getOwnPropertyDescriptor:u,getOwnPropertyNames:d,getOwnPropertySymbols:p,getPrototypeOf:f}=Object,g=globalThis,_=g.trustedTypes,m=_?_.emptyScript:"",y=g.reactiveElementPolyfillSupport,v=(t,e)=>t,b={toAttribute(t,e){switch(e){case Boolean:t=t?m:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},$=(t,e)=>!c(t,e),w={attribute:!0,type:String,converter:b,reflect:!1,useDefault:!1,hasChanged:$};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Symbol.metadata??=Symbol("metadata"),g.litPropertyMetadata??=new WeakMap;let x=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=w){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(t,n,e);void 0!==i&&h(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){const{get:i,set:r}=u(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:i,set(e){const o=i?.call(this);r?.call(this,e),this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??w}static _$Ei(){if(this.hasOwnProperty(v("elementProperties")))return;const t=f(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(v("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(v("properties"))){const t=this.properties,e=[...d(t),...p(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,i)=>{if(n)t.adoptedStyleSheets=i.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const n of i){const i=document.createElement("style"),r=e.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=n.cssText,t.appendChild(i)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$ET(t,e){const n=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:b).toAttribute(e,n.type);this._$Em=t,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null}}_$AK(t,e){const n=this.constructor,i=n._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=n.getPropertyOptions(i),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:b;this._$Em=i;const o=r.fromAttribute(e,t.type);this[i]=o??this._$Ej?.get(i)??o,this._$Em=null}}requestUpdate(t,e,n){if(void 0!==t){const i=this.constructor,r=this[t];if(n??=i.getPropertyOptions(t),!((n.hasChanged??$)(r,e)||n.useDefault&&n.reflect&&r===this._$Ej?.get(t)&&!this.hasAttribute(i._$Eu(t,n))))return;this.C(t,e,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:n,reflect:i,wrapped:r},o){n&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,o??e??this[t]),!0!==r||void 0!==o)||(this._$AL.has(t)||(this.hasUpdated||n||(e=void 0),this._$AL.set(t,e)),!0===i&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t){const{wrapped:t}=n,i=this[e];!0!==t||this._$AL.has(e)||void 0===i||this.C(e,void 0,n,i)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}};x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[v("elementProperties")]=new Map,x[v("finalized")]=new Map,y?.({ReactiveElement:x}),(g.reactiveElementVersions??=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const A=globalThis,k=A.trustedTypes,E=k?k.createPolicy("lit-html",{createHTML:t=>t}):void 0,M="$lit$",C=`lit$${Math.random().toFixed(9).slice(2)}$`,S="?"+C,N=`<${S}>`,P=document,O=()=>P.createComment(""),I=t=>null===t||"object"!=typeof t&&"function"!=typeof t,R=Array.isArray,H="[ \t\n\f\r]",L=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,U=/>/g,z=RegExp(`>|${H}(?:([^\\s"'>=/]+)(${H}*=${H}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),j=/'/g,D=/"/g,q=/^(?:script|style|textarea|title)$/i,V=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),B=Symbol.for("lit-noChange"),F=Symbol.for("lit-nothing"),W=new WeakMap,X=P.createTreeWalker(P,129);function G(t,e){if(!R(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==E?E.createHTML(e):e}const Y=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":3===e?"<math>":"",s=L;for(let e=0;e<n;e++){const n=t[e];let a,l,c=-1,h=0;for(;h<n.length&&(s.lastIndex=h,l=s.exec(n),null!==l);)h=s.lastIndex,s===L?"!--"===l[1]?s=T:void 0!==l[1]?s=U:void 0!==l[2]?(q.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=z):void 0!==l[3]&&(s=z):s===z?">"===l[0]?(s=r??L,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?z:'"'===l[3]?D:j):s===D||s===j?s=z:s===T||s===U?s=L:(s=z,r=void 0);const u=s===z&&t[e+1].startsWith("/>")?" ":"";o+=s===L?n+N:c>=0?(i.push(a),n.slice(0,c)+M+n.slice(c)+C+u):n+C+(-2===c?e:u)}return[G(t,o+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),i]};class K{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[l,c]=Y(t,e);if(this.el=K.createElement(l,n),X.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=X.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(M)){const e=c[o++],n=i.getAttribute(t).split(C),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:s[2],strings:n,ctor:"."===s[1]?et:"?"===s[1]?nt:"@"===s[1]?it:tt}),i.removeAttribute(t)}else t.startsWith(C)&&(a.push({type:6,index:r}),i.removeAttribute(t));if(q.test(i.tagName)){const t=i.textContent.split(C),e=t.length-1;if(e>0){i.textContent=k?k.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],O()),X.nextNode(),a.push({type:2,index:++r});i.append(t[e],O())}}}else if(8===i.nodeType)if(i.data===S)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(C,t+1));)a.push({type:7,index:r}),t+=C.length-1}r++}}static createElement(t,e){const n=P.createElement("template");return n.innerHTML=t,n}}function Z(t,e,n=t,i){if(e===B)return e;let r=void 0!==i?n._$Co?.[i]:n._$Cl;const o=I(e)?void 0:e._$litDirective$;return r?.constructor!==o&&(r?._$AO?.(!1),void 0===o?r=void 0:(r=new o(t),r._$AT(t,n,i)),void 0!==i?(n._$Co??=[])[i]=r:n._$Cl=r),void 0!==r&&(e=Z(t,r._$AS(t,e.values),r,i)),e}class J{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,i=(t?.creationScope??P).importNode(e,!0);X.currentNode=i;let r=X.nextNode(),o=0,s=0,a=n[0];for(;void 0!==a;){if(o===a.index){let e;2===a.type?e=new Q(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new rt(r,this,t)),this._$AV.push(e),a=n[++s]}o!==a?.index&&(r=X.nextNode(),o++)}return X.currentNode=P,i}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,i){this.type=2,this._$AH=F,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Z(this,t,e),I(t)?t===F||null==t||""===t?(this._$AH!==F&&this._$AR(),this._$AH=F):t!==this._$AH&&t!==B&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>R(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==F&&I(this._$AH)?this._$AA.nextSibling.data=t:this.T(P.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=K.createElement(G(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(e);else{const t=new J(i,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t}}_$AC(t){let e=W.get(t.strings);return void 0===e&&W.set(t.strings,e=new K(t)),e}k(t){R(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new Q(this.O(O()),this.O(O()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class tt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,i,r){this.type=1,this._$AH=F,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=F}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=Z(this,t,e,0),o=!I(t)||t!==this._$AH&&t!==B,o&&(this._$AH=t);else{const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=Z(this,i[n+s],e,s),a===B&&(a=this._$AH[s]),o||=!I(a)||a!==this._$AH[s],a===F?t=F:t!==F&&(t+=(a??"")+r[s+1]),this._$AH[s]=a}o&&!i&&this.j(t)}j(t){t===F?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class et extends tt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===F?void 0:t}}class nt extends tt{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==F)}}class it extends tt{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5}_$AI(t,e=this){if((t=Z(this,t,e,0)??F)===B)return;const n=this._$AH,i=t===F&&n!==F||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==F&&(n===F||i);i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class rt{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Z(this,t)}}const ot=A.litHtmlPolyfillSupport;ot?.(K,Q),(A.litHtmlVersions??=[]).push("3.3.1");const st=globalThis;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class at extends x{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const i=n?.renderBefore??e;let r=i._$litPart$;if(void 0===r){const t=n?.renderBefore??null;i._$litPart$=r=new Q(e.insertBefore(O(),t),t,void 0,n??{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return B}}at._$litElement$=!0,at.finalized=!0,st.litElementHydrateSupport?.({LitElement:at});const lt=st.litElementPolyfillSupport;lt?.({LitElement:at}),(st.litElementVersions??=[]).push("4.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ct=t=>(e,n)=>{void 0!==n?n.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)},ht={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:$},ut=(t=ht,e,n)=>{const{kind:i,metadata:r}=n;let o=globalThis.litPropertyMetadata.get(r);if(void 0===o&&globalThis.litPropertyMetadata.set(r,o=new Map),"setter"===i&&((t=Object.create(t)).wrapped=!0),o.set(n.name,t),"accessor"===i){const{name:i}=n;return{set(n){const r=e.get.call(this);e.set.call(this,n),this.requestUpdate(i,r,t)},init(e){return void 0!==e&&this.C(i,void 0,t,e),e}}}if("setter"===i){const{name:i}=n;return function(n){const r=this[i];e.call(this,n),this.requestUpdate(i,r,t)}}throw Error("Unsupported decorator location: "+i)};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function dt(t){return(e,n)=>"object"==typeof n?ut(t,e,n):((t,e,n)=>{const i=e.hasOwnProperty(n);return e.constructor.createProperty(n,t),i?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function pt(t){return dt({...t,state:!0,attribute:!1})}function ft(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _t(t){let e,n,i;function r(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length?(e=ft,n=(e,n)=>ft(t(e),n),i=(e,n)=>t(e)-n):(e=t===ft||t===gt?t:mt,n=t,i=t),{left:r,center:function(t,e,n=0,o=t.length){const s=r(t,e,n,o-1);return s>n&&i(t[s-1],e)>-i(t[s],e)?s-1:s},right:function(t,i,r=0,o=t.length){if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<=0?r=e+1:o=e}while(r<o)}return r}}}function mt(){return 0}const yt=_t(ft).right;_t(function(t){return null===t?NaN:+t}).center;const vt=Math.sqrt(50),bt=Math.sqrt(10),$t=Math.sqrt(2);function wt(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=vt?10:o>=bt?5:o>=$t?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?wt(t,e,2*n):[a,l,c]}function xt(t,e,n){return wt(t=+t,e=+e,n=+n)[2]}function At(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function kt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Et(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Mt(){}var Ct=.7,St=1/Ct,Nt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",It=/^#([0-9a-f]{3,8})$/,Rt=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Ht=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Lt=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Pt}\\)$`),Tt=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Pt}\\)$`),Ut=new RegExp(`^hsl\\(${Pt},${Ot},${Ot}\\)$`),zt=new RegExp(`^hsla\\(${Pt},${Ot},${Ot},${Pt}\\)$`),jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dt(){return this.rgb().formatHex()}function qt(){return this.rgb().formatRgb()}function Vt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=It.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Bt(e):3===n?new Xt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ft(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ft(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Rt.exec(t))?new Xt(e[1],e[2],e[3],1):(e=Ht.exec(t))?new Xt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Lt.exec(t))?Ft(e[1],e[2],e[3],e[4]):(e=Tt.exec(t))?Ft(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ut.exec(t))?Qt(e[1],e[2]/100,e[3]/100,1):(e=zt.exec(t))?Qt(e[1],e[2]/100,e[3]/100,e[4]):jt.hasOwnProperty(t)?Bt(jt[t]):"transparent"===t?new Xt(NaN,NaN,NaN,0):null}function Bt(t){return new Xt(t>>16&255,t>>8&255,255&t,1)}function Ft(t,e,n,i){return i<=0&&(t=e=n=NaN),new Xt(t,e,n,i)}function Wt(t,e,n,i){return 1===arguments.length?function(t){return t instanceof Mt||(t=Vt(t)),t?new Xt((t=t.rgb()).r,t.g,t.b,t.opacity):new Xt}(t):new Xt(t,e,n,null==i?1:i)}function Xt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Gt(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function Yt(){const t=Kt(this.opacity);return`${1===t?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${1===t?")":`, ${t})`}`}function Kt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jt(t){return((t=Zt(t))<16?"0":"")+t.toString(16)}function Qt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ee(t,e,n,i)}function te(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);if(t instanceof Mt||(t=Vt(t)),!t)return new ee;if(t instanceof ee)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new ee(s,a,l,t.opacity)}function ee(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ne(t){return(t=(t||0)%360)<0?t+360:t}function ie(t){return Math.max(0,Math.min(1,t||0))}function re(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}kt(Mt,Vt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Dt,formatHex:Dt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return te(this).formatHsl()},formatRgb:qt,toString:qt}),kt(Xt,Wt,Et(Mt,{brighter(t){return t=null==t?St:Math.pow(St,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ct:Math.pow(Ct,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xt(Zt(this.r),Zt(this.g),Zt(this.b),Kt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gt,formatHex:Gt,formatHex8:function(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Yt,toString:Yt})),kt(ee,function(t,e,n,i){return 1===arguments.length?te(t):new ee(t,e,n,null==i?1:i)},Et(Mt,{brighter(t){return t=null==t?St:Math.pow(St,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ct:Math.pow(Ct,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Xt(re(t>=240?t-240:t+120,r,i),re(t,r,i),re(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ee(ne(this.h),ie(this.s),ie(this.l),Kt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kt(this.opacity);return`${1===t?"hsl(":"hsla("}${ne(this.h)}, ${100*ie(this.s)}%, ${100*ie(this.l)}%${1===t?")":`, ${t})`}`}}));var oe=t=>()=>t;function se(t){return 1===(t=+t)?ae:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):oe(isNaN(e)?n:e)}}function ae(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):oe(isNaN(t)?e:t)}var le=function t(e){var n=se(e);function i(t,e){var i=n((t=Wt(t)).r,(e=Wt(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=ae(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function ce(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function he(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=me(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function ue(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function de(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pe(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=me(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ge=new RegExp(fe.source,"g");function _e(t,e){var n,i,r,o=fe.lastIndex=ge.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=fe.exec(t))&&(i=ge.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:de(n,i)})),o=ge.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function me(t,e){var n,i=typeof e;return null==e||"boolean"===i?oe(e):("number"===i?de:"string"===i?(n=Vt(e))?(e=n,le):_e:e instanceof Vt?le:e instanceof Date?ue:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?ce:Array.isArray(e)?he:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?pe:de)(t,e)}function ye(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ve(t){return+t}var be=[0,1];function $e(t){return t}function we(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function xe(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=we(r,i),o=n(s,o)):(i=we(i,r),o=n(o,s)),function(t){return o(i(t))}}function Ae(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=we(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=yt(t,e,1,i)-1;return o[n](r[n](e))}}function ke(){var t,e,n,i,r,o,s=be,a=be,l=me,c=$e;function h(){var t=Math.min(s.length,a.length);return c!==$e&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),i=t>2?Ae:xe,r=o=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=i(s.map(t),a,l)))(t(c(e)))}return u.invert=function(n){return c(e((o||(o=i(a,s.map(t),de)))(n)))},u.domain=function(t){return arguments.length?(s=Array.from(t,ve),h()):s.slice()},u.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},u.rangeRound=function(t){return a=Array.from(t),l=ye,h()},u.clamp=function(t){return arguments.length?(c=!!t||$e,h()):c!==$e},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,h()}}function Ee(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Me(t){return(t=Ee(Math.abs(t)))?t[1]:NaN}var Ce,Se=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ne(t){if(!(e=Se.exec(t)))throw new Error("invalid format: "+t);var e;return new Pe({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Pe(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Oe(t,e){var n=Ee(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ne.prototype=Pe.prototype,Pe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ie={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Oe(100*t,e),r:Oe,s:function(t,e){var n=Ee(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Ce=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ee(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Re(t){return t}var He,Le,Te,Ue=Array.prototype.map,ze=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function je(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Re:(e=Ue.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Re:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Ue.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=Ne(t)).fill,n=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,_=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Ie[y]||(void 0===_&&(_=12),m=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var v="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?o:/[%p]/.test(y)?l:"",$=Ie[y],w=/[defgprs%]/.test(y);function x(t){var r,o,l,d=v,x=b;if("c"===y)x=$(t)+x,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:$(Math.abs(t),_),m&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),A&&0===+t&&"+"!==u&&(A=!1),d=(A?"("===u?u:c:"-"===u||"("===u?"":u)+d,x=("s"===y?ze[8+Ce/3]:"")+x+(A&&"("===u?")":""),w)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){x=(46===l?s+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}g&&!p&&(t=i(t,1/0));var k=d.length+t.length+x.length,E=k<f?new Array(f-k+1).join(e):"";switch(g&&p&&(t=i(E+t,E.length?f-x.length:1/0),E=""),n){case"<":t=d+t+x+E;break;case"=":t=d+E+t+x;break;case"^":t=E.slice(0,k=E.length>>1)+d+t+x+E.slice(k);break;default:t=E+d+t+x}return a(t)}return _=void 0===_?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),x.toString=function(){return t+""},x}return{format:u,formatPrefix:function(t,e){var n=u(((t=Ne(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Me(e)/3))),r=Math.pow(10,-i),o=ze[8+i/3];return function(t){return n(r*t)+o}}}}function De(t,e,n,i){var r,o=function(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?xt(e,t,n):xt(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}(t,e,n);switch((i=Ne(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Me(e)/3)))-Me(Math.abs(t)))}(o,s))||(i.precision=r),Te(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Me(e)-Me(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Me(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return Le(i)}function qe(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const i=e<t,[r,o,s]=i?wt(e,t,n):wt(t,e,n);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let t=0;t<a;++t)l[t]=(o-t)/-s;else for(let t=0;t<a;++t)l[t]=(o-t)*s;else if(s<0)for(let t=0;t<a;++t)l[t]=(r+t)/-s;else for(let t=0;t<a;++t)l[t]=(r+t)*s;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return De(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),s=0,a=o.length-1,l=o[s],c=o[a],h=10;for(c<l&&(r=l,l=c,c=r,r=s,s=a,a=r);h-- >0;){if((r=xt(l,c,n))===i)return o[s]=l,o[a]=c,e(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function Ve(){var t=ke()($e,$e);return t.copy=function(){return e=t,Ve().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},At.apply(t,arguments),qe(t)}He=je({thousands:",",grouping:[3],currency:["$",""]}),Le=He.format,Te=He.formatPrefix;const Be={de:{editor:{title:"Titel (Optional)",entities:"Entitäten",entity:"Entität",name:"Name (Optional)",color:"Farbe (Optional)",add_entity:"Entität hinzufügen",data:"Daten",auto_radar_max_distance:"Auto. max. Entfernung",radar_max_distance:"Radar max. Entfernung",center_latitude:"Mittelpunkt-Breitengrad (Überschreiben)",center_longitude:"Mittelpunkt-Längengrad (Überschreiben)",appearance:"Darstellung",grid_color:"Gitterfarbe (Optional)",font_color:"Schriftfarbe (Optional)",entity_color:"Standard Entitätsfarbe (Optional)",show_grid_labels:"Gitter-Entfernungsbeschriftungen anzeigen",points_clickable:"Punkte klickbar machen",show_legend:"Legende anzeigen",legend_position:"Legendenposition",legend_positions:{bottom:"Unten",right:"Rechts",left:"Links"},legend_show_distance:"Entfernung in Legende anzeigen"},card:{distance:"Entfernung",azimuth:"Azimut",no_home_location:"Mittelpunkt ist in Home Assistant nicht festgelegt und es wurden keine benutzerdefinierten Koordinaten angegeben.",incomplete_center_coords:"Bitte geben Sie sowohl den Mittelpunkt-Breitengrad als auch den Mittelpunkt-Längengrad an.",no_entities:"Keine Entitäten zum Anzeigen",directions:{N:"N",E:"O",S:"S",W:"W"}}},en:{editor:{title:"Title (Optional)",entities:"Entities",entity:"Entity",name:"Name (Optional)",color:"Color (Optional)",add_entity:"Add Entity",data:"Data",auto_radar_max_distance:"Auto Max Distance",radar_max_distance:"Radar Max Distance",center_latitude:"Center Latitude (Override)",center_longitude:"Center Longitude (Override)",appearance:"Appearance",grid_color:"Grid Color (Optional)",font_color:"Font Color (Optional)",entity_color:"Default Entity Color (Optional)",show_grid_labels:"Show Grid Distance Labels",points_clickable:"Make points clickable",show_legend:"Show Legend",legend_position:"Legend Position",legend_positions:{bottom:"Bottom",right:"Right",left:"Left"},legend_show_distance:"Show distance in legend"},card:{distance:"Distance",azimuth:"Azimuth",no_home_location:"Center location is not set in Home Assistant and no custom coordinates are provided.",incomplete_center_coords:"Please provide both Center Latitude and Center Longitude.",no_entities:"No entities to show",directions:{N:"N",E:"E",S:"S",W:"W"}}}};function Fe(t,e){let n=Be[t];for(const t of e){if("object"!=typeof n||null===n)return;n=n[t]}return"string"==typeof n?n:void 0}function We(t,e,n={}){const i=t.language||"en",r=e.replace("component.radar-card.","").split("."),o=Fe(i,r)??Fe("en",r);if("string"==typeof o){let t=o;for(const e in n)t=t.replace(`{${e}}`,String(n[e]));return t}return e}var Xe="http://www.w3.org/1999/xhtml",Ge={svg:"http://www.w3.org/2000/svg",xhtml:Xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ye(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ge.hasOwnProperty(e)?{space:Ge[e],local:t}:t}function Ke(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xe&&e.documentElement.namespaceURI===Xe?e.createElement(t):e.createElementNS(n,t)}}function Ze(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Je(t){var e=Ye(t);return(e.local?Ze:Ke)(e)}function Qe(){}function tn(t){return null==t?Qe:function(){return this.querySelector(t)}}function en(){return[]}function nn(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function rn(t){return function(e){return e.matches(t)}}var on=Array.prototype.find;function sn(){return this.firstElementChild}var an=Array.prototype.filter;function ln(){return Array.from(this.children)}function cn(t){return new Array(t.length)}function hn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function un(t,e,n,i,r,o){for(var s,a=0,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new hn(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s)}function dn(t,e,n,i,r,o,s){var a,l,c,h=new Map,u=e.length,d=o.length,p=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(p[a]=c=s.call(l,l.__data__,a,e)+"",h.has(c)?r[a]=l:h.set(c,l));for(a=0;a<d;++a)c=s.call(t,o[a],a,o)+"",(l=h.get(c))?(i[a]=l,l.__data__=o[a],h.delete(c)):n[a]=new hn(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&h.get(p[a])===l&&(r[a]=l)}function pn(t){return t.__data__}function fn(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function gn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _n(t){return function(){this.removeAttribute(t)}}function mn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yn(t,e){return function(){this.setAttribute(t,e)}}function vn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function $n(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function wn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xn(t){return function(){this.style.removeProperty(t)}}function An(t,e,n){return function(){this.style.setProperty(t,e,n)}}function kn(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function En(t){return function(){delete this[t]}}function Mn(t,e){return function(){this[t]=e}}function Cn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Sn(t){return t.trim().split(/^|\s+/)}function Nn(t){return t.classList||new Pn(t)}function Pn(t){this._node=t,this._names=Sn(t.getAttribute("class")||"")}function On(t,e){for(var n=Nn(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function In(t,e){for(var n=Nn(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Rn(t){return function(){On(this,t)}}function Hn(t){return function(){In(this,t)}}function Ln(t,e){return function(){(e.apply(this,arguments)?On:In)(this,t)}}function Tn(){this.textContent=""}function Un(t){return function(){this.textContent=t}}function zn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function jn(){this.innerHTML=""}function Dn(t){return function(){this.innerHTML=t}}function qn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Vn(){this.nextSibling&&this.parentNode.appendChild(this)}function Bn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fn(){return null}function Wn(){var t=this.parentNode;t&&t.removeChild(this)}function Xn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yn(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function Kn(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Zn(t,e,n){var i=wn(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Jn(t,e){return function(){return Zn(this,t,e)}}function Qn(t,e){return function(){return Zn(this,t,e.apply(this,arguments))}}hn.prototype={constructor:hn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Pn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ti=[null];function ei(t,e){this._groups=t,this._parents=e}ei.prototype={constructor:ei,select:function(t){"function"!=typeof t&&(t=tn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,c=i[r]=new Array(l),h=0;h<l;++h)(o=a[h])&&(s=t.call(o,o.__data__,h,a))&&("__data__"in o&&(s.__data__=o.__data__),c[h]=s);return new ei(i,this._parents)},selectAll:function(t){t="function"==typeof t?nn(t):function(t){return null==t?en:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(t.call(s,s.__data__,c,a)),r.push(s));return new ei(i,r)},selectChild:function(t){return this.select(null==t?sn:function(t){return function(){return on.call(this.children,t)}}("function"==typeof t?t:rn(t)))},selectChildren:function(t){return this.selectAll(null==t?ln:function(t){return function(){return an.call(this.children,t)}}("function"==typeof t?t:rn(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new ei(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,pn);var n=e?dn:un,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var h=i[c],u=r[c],d=u.length,p=fn(t.call(h,h&&h.__data__,c,i)),f=p.length,g=a[c]=new Array(f),_=s[c]=new Array(f);n(h,u,g,_,l[c]=new Array(d),p,e);for(var m,y,v=0,b=0;v<f;++v)if(m=g[v]){for(v>=b&&(b=v+1);!(y=_[b])&&++b<f;);m._next=y||null}}return(s=new ei(s,i))._enter=a,s._exit=l,s},enter:function(){return new ei(this._enter||this._groups.map(cn),this._parents)},exit:function(){return new ei(this._exit||this._groups.map(cn),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c,h=n[l],u=i[l],d=h.length,p=a[l]=new Array(d),f=0;f<d;++f)(c=h[f]||u[f])&&(p[f]=c);for(;l<r;++l)a[l]=n[l];return new ei(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=gn);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,c=r[o]=new Array(l),h=0;h<l;++h)(s=a[h])&&(c[h]=s);c.sort(e)}return new ei(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=Ye(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?mn:_n:"function"==typeof e?n.local?$n:bn:n.local?vn:yn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?xn:"function"==typeof e?kn:An)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||wn(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?En:"function"==typeof e?Cn:Mn)(t,e)):this.node()[t]},classed:function(t,e){var n=Sn(t+"");if(arguments.length<2){for(var i=Nn(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Ln:e?Rn:Hn)(n,e))},text:function(t){return arguments.length?this.each(null==t?Tn:("function"==typeof t?zn:Un)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?jn:("function"==typeof t?qn:Dn)(t)):this.node().innerHTML},raise:function(){return this.each(Vn)},lower:function(){return this.each(Bn)},append:function(t){var e="function"==typeof t?t:Je(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Je(t),i=null==e?Fn:"function"==typeof e?e:tn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Wn)},clone:function(t){return this.select(t?Gn:Xn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Kn:Yn,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,h=a.length;c<h;++c)for(i=0,l=a[c];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Qn:Jn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};const ni=a`.card-content{padding:16px}.card-content.flex-layout{display:flex;gap:16px;align-items:center;padding:8px}.card-content.legend-left .legend{order:-1}.warning{color:var(--error-color)}.radar-chart-container{position:relative;display:flex;justify-content:center;align-items:center;flex-shrink:0}.radar-chart{height:220px;position:relative;width:220px}.custom-tooltip{background-color:var(--ha-card-background, var(--card-background-color, white));border:1px solid var(--divider-color);border-radius:var(--ha-card-border-radius, 4px);box-shadow:0 2px 5px rgba(0,0,0,.2);font-size:12px;left:0;line-height:1.4;max-width:220px;opacity:0;overflow-wrap:break-word;padding:8px;pointer-events:none;position:absolute;top:0;transition:opacity .2s ease-in-out;visibility:hidden;z-index:1000}.custom-tooltip.visible{opacity:1;visibility:visible}.custom-tooltip strong{color:var(--primary-text-color)}.no-entities{text-align:center;padding:16px}@keyframes pulse{0%{r:3}50%{r:7.5}100%{r:3}}.entity-dot.pulsing{animation:pulse 1.5s infinite}.legend{display:flex;gap:8px}.legend.bottom{flex-wrap:wrap;justify-content:center;gap:8px 16px;margin-top:16px}.legend.left,.legend.right{flex-direction:column;align-items:flex-start;overflow-y:auto;max-height:220px;flex-grow:1;pointer-events:auto}.legend-item{display:flex;align-items:center;gap:8px;cursor:pointer;border-radius:4px;padding:2px 4px;transition:background-color .3s ease}.legend-item:hover{background-color:color-mix(in srgb, var(--secondary-text-color) 10%, transparent)}.legend-item.active{background-color:color-mix(in srgb, var(--accent-color) 20%, transparent)}.legend-color{width:12px;height:12px;border-radius:50%;flex-shrink:0}.legend-name{font-size:12px;color:var(--secondary-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}`,ii=(t,e,n,i)=>{const r=new CustomEvent(e,{bubbles:!0,cancelable:!1,composed:!0,...i,detail:n});t.dispatchEvent(r)};function ri(t){return t*Math.PI/180}function oi(t,e,n,i){const r=ri(i-e),o=Math.sin(r)*Math.cos(ri(n)),s=Math.cos(ri(t))*Math.sin(ri(n))-Math.sin(ri(t))*Math.cos(ri(n))*Math.cos(r);let a=180*Math.atan2(o,s)/Math.PI;return a=(a+360)%360,a}function si(t,e,n){if("km"===e&&t<1)return`${Math.round(1e3*t)} m`;if("mi"===e&&t<1)return`${Math.round(5280*t)} ft`;const i=t.toFixed(2);return n?.removeIntegerDecimals&&i.endsWith(".00")?`${t.toFixed(0)} ${e}`:`${i} ${e}`}const ai="radar-card",li=`${ai}-editor`;console.info("%c RADAR-CARD %c 0.1.0 ","color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray");let ci=class extends at{constructor(){super(...arguments),this._points=[],this._tooltip={visible:!1,content:F,x:0,y:0},this._pulsingEntityId=null,this._error=null}setConfig(t){if(!t||!t.entities||!Array.isArray(t.entities)||0===t.entities.length)throw new Error("You need to define at least one entity");this._config=t}static async getConfigElement(){const t=window.loadCardHelpers;if(!t)throw new Error("This card requires Home Assistant 2023.4+ and `loadCardHelpers` is not available.");const e=await t(),n=await e.createCardElement({type:"entities",entities:[]});return await n.constructor.getConfigElement(),await Promise.resolve().then(function(){return ji}),document.createElement(li)}static getStubConfig(){return{entities:["device_tracker.your_device"]}}getCardSize(){return 3}async _showTooltip(t,e,n){const i=this._getPointTooltipContent(e,n);this._tooltip={...this._tooltip,visible:!0,content:i},await this.updateComplete,this._moveTooltip(t)}_getPointTooltipContent(t,e){const n=si(t.distance,e);return V`
      <strong>${t.name||t.entity_id}</strong><br />
      ${We(this.hass,"component.radar-card.card.distance")}: ${n}<br />
      ${We(this.hass,"component.radar-card.card.azimuth")}: ${Math.round(t.azimuth)}°
    `}_moveTooltip(t){if(!this._tooltip.visible)return;const e=this.shadowRoot?.querySelector(".custom-tooltip");if(!e)return;const n=this.shadowRoot?.querySelector(".radar-chart-container");if(!n)return;const i=n.getBoundingClientRect(),{clientX:r}=t,{clientY:o}=t,s=r-i.left,a=o-i.top,l=e.offsetWidth,c=e.offsetHeight,h=s>i.width/2?-l-10:10;let u=-c-10;a+u<0&&(u=20),this._tooltip={...this._tooltip,x:s+h,y:a+u}}_hideTooltip(){this._tooltip.visible&&(this._tooltip={...this._tooltip,visible:!1,content:F})}_handleLegendItemClick(t){t.entity_id&&(this._pulsingEntityId===t.entity_id?this._pulsingEntityId=null:this._pulsingEntityId=t.entity_id)}_renderRadarChart(t){const e=this.shadowRoot?.querySelector(".radar-chart");if(!e)return;const n=Math.min(220,220)/2-20,i=this.hass.config.unit_system.length||"km",r=!0===this._config.auto_radar_max_distance?function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}(t,t=>t.distance)??100:this._config.radar_max_distance??100,o=Ve().domain([0,r]).range([0,n]),s=function(t){return"string"==typeof t?new ei([[document.querySelector(t)]],[document.documentElement]):new ei([[t]],ti)}(e).selectAll("svg").data([null]).join("svg").attr("viewBox","0 0 220 220").attr("role","img").attr("aria-labelledby","radar-desc");s.selectAll("desc").data([null]).join("desc").attr("id","radar-desc").text(`Showing ${t.length} entities. The center is your location. Entities are plotted by distance and direction.`);const a=s.selectAll("g.radar-main-group").data([null]).join("g").attr("class","radar-main-group").attr("transform","translate(110, 110)"),l=o.ticks(4).slice(1);if(a.selectAll(".grid-circle").data(l).join(t=>t.append("circle").attr("class","grid-circle").style("fill","none"),t=>t,t=>t.remove()).attr("r",t=>o(t)).style("stroke",this._config.grid_color??"var(--primary-text-color)").style("opacity",.3),!1!==this._config.show_grid_labels){const t=l.map(t=>si(t,i,{removeIntegerDecimals:!0})),e=t.map(t=>t.split(" ")[1]);a.selectAll(".grid-label").data(l).join("text").attr("class","grid-label").attr("x",4).attr("y",t=>-o(t)).attr("dy","-0.2em").style("text-anchor","start").style("fill",this._config.font_color??this._config.grid_color??"var(--primary-text-color)").style("font-size","8px").style("opacity",.7).text((n,i)=>{const r=t[i];return i<l.length-1&&e[i]===e[i+1]?r.split(" ")[0]:r})}else a.selectAll(".grid-label").remove();const c=[{label:We(this.hass,"component.radar-card.card.directions.N"),angle:0},{label:We(this.hass,"component.radar-card.card.directions.E"),angle:90},{label:We(this.hass,"component.radar-card.card.directions.S"),angle:180},{label:We(this.hass,"component.radar-card.card.directions.W"),angle:270}];a.selectAll(".cardinal-line").data(c).join("line").attr("class","cardinal-line").style("stroke",this._config.grid_color??"var(--primary-text-color)").style("opacity",.3).attr("x1",0).attr("y1",0).attr("x2",t=>o(r)*Math.cos((t.angle-90)*(Math.PI/180))).attr("y2",t=>o(r)*Math.sin((t.angle-90)*(Math.PI/180))),a.selectAll(".cardinal-label").data(c).join("text").attr("class","cardinal-label").text(t=>t.label).style("text-anchor","middle").style("dominant-baseline","middle").style("fill",this._config.font_color??this._config.grid_color??"var(--primary-text-color)").style("font-size","10px").attr("x",t=>(o(r)+10)*Math.cos((t.angle-90)*(Math.PI/180))).attr("y",t=>(o(r)+10)*Math.sin((t.angle-90)*(Math.PI/180)));const h=a.selectAll("circle.entity-dot").data(t,(t,e)=>t.entity_id||t.name||e).join("circle");h.attr("r",3).attr("class",t=>"entity-dot "+(t.entity_id===this._pulsingEntityId?"pulsing":"")).style("fill",t=>t.color||this._config.entity_color||"var(--info-color)").style("fill-opacity",1).style("cursor",!1!==this._config.points_clickable?"pointer":"default").attr("cx",t=>o(t.distance)*Math.cos((t.azimuth-90)*(Math.PI/180))).attr("cy",t=>o(t.distance)*Math.sin((t.azimuth-90)*(Math.PI/180))).on("mouseover",(t,e)=>{this._showTooltip(t,e,i)}).on("mousemove",t=>{this._moveTooltip(t)}).on("mouseout",()=>this._hideTooltip()),!1!==this._config.points_clickable?h.on("click",(t,e)=>{e.entity_id&&ii(this,"hass-more-info",{entityId:e.entity_id})}):h.on("click",null)}_renderLegend(){const t=this._config.legend_position||"bottom",e=!0===this._config.legend_show_distance,n=this.hass.config.unit_system.length||"km";return V`
      <div class="legend ${t}">
        ${this._points.map(t=>{const i=e?` (${si(t.distance,n)})`:"";return V`
            <div
              class="legend-item ${t.entity_id===this._pulsingEntityId?"active":""}"
              @click=${()=>this._handleLegendItemClick(t)}
            >
              <span
                class="legend-color"
                style="background-color: ${t.color||this._config.entity_color||"var(--info-color)"}"
              ></span>
              <span class="legend-name">${t.name}${i}</span>
            </div>
          `})}
      </div>
    `}_calculatePoints(){const t=null!=this._config.center_latitude&&null!=this._config.center_longitude,e={lat:t?this._config.center_latitude:this.hass.config.latitude,lon:t?this._config.center_longitude:this.hass.config.longitude},n=this._config.entities.map(t=>"string"==typeof t?{entity:t}:t);this._points=n.map(t=>{const n=t.entity,i=this.hass.states[n];if(!i||null==i.attributes.latitude||null==i.attributes.longitude)return null;const r=function(t,e,n,i,r){const o="km"===r?6371:3959,s=ri(n-t),a=ri(i-e),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ri(t))*Math.cos(ri(n))*Math.sin(a/2)*Math.sin(a/2);return o*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}(e.lat,e.lon,i.attributes.latitude,i.attributes.longitude,this.hass.config.unit_system.length);return{distance:r,azimuth:oi(e.lat,e.lon,i.attributes.latitude,i.attributes.longitude),name:t.name||i.attributes.friendly_name||n,entity_id:n,color:t.color}}).filter(t=>null!==t)}render(){if(!this._config||!this.hass)return V``;if(this._error)return V`
        <ha-card .header=${this._config.title}>
          <div class="card-content warning">${this._error}</div>
        </ha-card>
      `;if(0===this._points.length)return V`
        <ha-card .header=${this._config.title}>
          <div class="card-content">
            <div class="no-entities">${We(this.hass,"component.radar-card.card.no_entities")}</div>
          </div>
        </ha-card>
      `;const t=this._config.legend_position||"bottom",e=this._config.show_legend?this._renderLegend():F,n=["left","right"].includes(t),i="bottom"===t,r=V`
      <div class="radar-chart-container" @mousemove=${this._moveTooltip}>
        <div class="radar-chart"></div>
        ${this._tooltip.visible?V`<div class="custom-tooltip visible" style="left: ${this._tooltip.x}px; top: ${this._tooltip.y}px;">
              ${this._tooltip.content}
            </div>`:""}
      </div>
    `;return V`
      <ha-card .header=${this._config.title}>
        <div class="card-content ${n?`flex-layout legend-${t}`:""}">
          ${r} ${n||i?e:F}
        </div>
      </ha-card>
    `}willUpdate(t){if(super.willUpdate(t),this._config&&this.hass&&this.hass.config&&(t.has("hass")||t.has("_config"))){this._error=null;const t=null!=this._config.center_latitude&&null!=this._config.center_longitude;if(!(null!=this.hass.config?.latitude&&null!=this.hass.config?.longitude)&&!t)return void(this._error=We(this.hass,"component.radar-card.card.no_home_location"));if(null!=this._config.center_latitude&&null==this._config.center_longitude||null==this._config.center_latitude&&null!=this._config.center_longitude)return void(this._error=We(this.hass,"component.radar-card.card.incomplete_center_coords"));this._calculatePoints()}}updated(t){super.updated(t),this._config&&this.hass&&(t.has("hass")||t.has("_config"))&&this._renderRadarChart(this._points)}static{this.styles=a`
    ${s(ni)}
  `}};t([dt({attribute:!1})],ci.prototype,"hass",void 0),t([pt()],ci.prototype,"_config",void 0),t([pt()],ci.prototype,"_points",void 0),t([pt()],ci.prototype,"_tooltip",void 0),t([pt()],ci.prototype,"_pulsingEntityId",void 0),t([pt()],ci.prototype,"_error",void 0),ci=t([ct(ai)],ci),"undefined"!=typeof window&&(window.customCards=window.customCards||[],window.customCards.push({type:ai,name:"Radar Card",description:"A card to display radar data.",documentationURL:"https://github.com/timmaurice/lovelace-radar-card",preview:!0}));const hi=(t,e=0,n=1)=>t>n?n:t<e?e:t,ui=(t,e=0,n=Math.pow(10,e))=>Math.round(n*t)/n,di=t=>("#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?ui(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?ui(parseInt(t.substring(6,8),16)/255,2):1}),pi=t=>{const{h:e,s:n,l:i}=(({h:t,s:e,v:n,a:i})=>{const r=(200-e)*n/100;return{h:ui(t),s:ui(r>0&&r<200?e*n/100/(r<=100?r:200-r)*100:0),l:ui(r/2),a:ui(i,2)}})(t);return`hsl(${e}, ${n}%, ${i}%)`},fi=({h:t,s:e,v:n,a:i})=>{t=t/360*6,e/=100,n/=100;const r=Math.floor(t),o=n*(1-e),s=n*(1-(t-r)*e),a=n*(1-(1-t+r)*e),l=r%6;return{r:ui(255*[n,s,o,o,a,n][l]),g:ui(255*[a,n,n,s,o,o][l]),b:ui(255*[o,o,a,n,n,s][l]),a:ui(i,2)}},gi=t=>{const e=t.toString(16);return e.length<2?"0"+e:e},_i=({r:t,g:e,b:n,a:i})=>{const r=i<1?gi(ui(255*i)):"";return"#"+gi(t)+gi(e)+gi(n)+r},mi=({r:t,g:e,b:n,a:i})=>{const r=Math.max(t,e,n),o=r-Math.min(t,e,n),s=o?r===t?(e-n)/o:r===e?2+(n-t)/o:4+(t-e)/o:0;return{h:ui(60*(s<0?s+6:s)),s:ui(r?o/r*100:0),v:ui(r/255*100),a:i}},yi=(t,e)=>{if(t===e)return!0;for(const n in t)if(t[n]!==e[n])return!1;return!0},vi={},bi=t=>{let e=vi[t];return e||(e=document.createElement("template"),e.innerHTML=t,vi[t]=e),e},$i=(t,e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))};let wi=!1;const xi=t=>"touches"in t,Ai=(t,e)=>{const n=xi(e)?e.touches[0]:e,i=t.el.getBoundingClientRect();$i(t.el,"move",t.getMove({x:hi((n.pageX-(i.left+window.pageXOffset))/i.width),y:hi((n.pageY-(i.top+window.pageYOffset))/i.height)}))};class ki{constructor(t,e,n,i){const r=bi(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(r.content.cloneNode(!0));const o=t.querySelector(`[part=${e}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=i,this.nodes=[o.firstChild,o]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(wi?"touchmove":"mousemove",this),e(wi?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!(t=>!(wi&&!xi(t)||(wi||(wi=xi(t)),0)))(t)||!wi&&0!=t.button)return;this.el.focus(),Ai(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),Ai(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":((t,e)=>{const n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),$i(t.el,"move",t.getMove({x:39===n?.01:37===n?-.01:34===n?.05:33===n?-.05:35===n?1:36===n?-1:0,y:40===n?.01:38===n?-.01:0},!0)))})(this,t)}}style(t){t.forEach((t,e)=>{for(const n in t)this.nodes[e].style.setProperty(n,t[n])})}}class Ei extends ki{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:t/360*100+"%",color:pi({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${ui(t)}`)}getMove(t,e){return{h:e?hi(this.h+360*t.x,0,360):360*t.x}}}class Mi extends ki{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:100-t.v+"%",left:`${t.s}%`,color:pi(t)},{"background-color":pi({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${ui(t.s)}%, Brightness ${ui(t.v)}%`)}getMove(t,e){return{s:e?hi(this.hsva.s+100*t.x,0,100):100*t.x,v:e?hi(this.hsva.v-100*t.y,0,100):Math.round(100-100*t.y)}}}const Ci=Symbol("same"),Si=Symbol("color"),Ni=Symbol("hsva"),Pi=Symbol("update"),Oi=Symbol("parts"),Ii=Symbol("css"),Ri=Symbol("sliders");class Hi extends HTMLElement{static get observedAttributes(){return["color"]}get[Ii](){return[':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',"[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}get[Ri](){return[Mi,Ei]}get color(){return this[Si]}set color(t){if(!this[Ci](t)){const e=this.colorModel.toHsva(t);this[Pi](e),this[Si]=t}}constructor(){super();const t=bi(`<style>${this[Ii].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[Oi]=this[Ri].map(t=>new t(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const i=this.colorModel.fromAttr(n);this[Ci](i)||(this.color=i)}handleEvent(t){const e=this[Ni],n={...e,...t.detail};let i;this[Pi](n),yi(n,e)||this[Ci](i=this.colorModel.fromHsva(n))||(this[Si]=i,$i(this,"color-changed",{value:i}))}[Ci](t){return this.color&&this.colorModel.equal(t,this.color)}[Pi](t){this[Ni]=t,this[Oi].forEach(e=>e.update(t))}}const Li={defaultColor:"#000",toHsva:t=>mi(di(t)),fromHsva:({h:t,s:e,v:n})=>_i(fi({h:t,s:e,v:n,a:1})),equal:(t,e)=>t.toLowerCase()===e.toLowerCase()||yi(di(t),di(e)),fromAttr:t=>t};class Ti extends Hi{get colorModel(){return Li}}customElements.define("hex-color-picker",class extends Ti{});const Ui=a`.color-input-wrapper{align-items:center;display:flex;gap:8px;position:relative}.color-input-wrapper ha-textfield{flex-grow:1}.color-picker-popup{background-color:var(--card-background-color, white);border:1px solid var(--divider-color);border-radius:8px;box-shadow:0px 5px 5px -3px rgba(0,0,0,.2),0px 8px 10px 1px rgba(0,0,0,.14),0px 3px 14px 2px rgba(0,0,0,.12);left:0;padding:8px;position:absolute;top:100%;z-index:10}.color-picker-popup hex-color-picker{height:200px;width:200px}.clear-button{color:var(--secondary-text-color)}.color-preview{border:1px solid var(--divider-color);border-radius:4px;box-sizing:border-box;cursor:pointer;flex-shrink:0;height:28px;width:28px}.card-config{display:flex;flex-direction:column;gap:16px}.side-by-side{display:flex;gap:16px}.side-by-side>*{flex:1}.entities-container{display:flex;flex-direction:column;gap:12px}.entity-row{align-items:center;display:flex;gap:8px}.entity-row ha-entity-picker{flex-grow:1}.header{align-items:center;display:flex;gap:8px}.header .title{font-size:1.2em;font-weight:bold}.option-group{border:1px solid var(--divider-color);border-radius:var(--ha-card-border-radius, 4px);display:flex;flex-direction:column;gap:16px;padding:16px}.option-group-title{color:var(--primary-text-color);font-weight:bold}.option-row{align-items:center;display:flex;gap:16px}`;let zi=class extends at{constructor(){super(...arguments),this._colorPickerOpenFor=null,this._editingIndex=null,this._handleOutsideClick=t=>{this._colorPickerOpenFor&&(t.composedPath().some(t=>t instanceof HTMLElement&&t.dataset.pickerId===this._colorPickerOpenFor)||this._closeColorPicker())}}setConfig(t){this._config=t}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("click",this._handleOutsideClick,{capture:!0})}updated(t){super.updated(t),t.has("_colorPickerOpenFor")&&(this._colorPickerOpenFor?window.addEventListener("click",this._handleOutsideClick,{capture:!0}):window.removeEventListener("click",this._handleOutsideClick,{capture:!0}))}_valueChanged(t){if(!this._config||!this.hass)return;const e=t.target;if(void 0===e.configValue)return;const n=e.configValue,i={...this._config};let r;r="value-changed"===t.type||"color-changed"===t.type?t.detail.value:"HA-SWITCH"===e.tagName?e.checked:e.value,"auto_radar_max_distance"===n?r?(i.auto_radar_max_distance=!0,delete i.radar_max_distance):delete i.auto_radar_max_distance:"points_clickable"===n?r?delete i.points_clickable:i.points_clickable=!1:"show_grid_labels"===n?r?delete i.show_grid_labels:i.show_grid_labels=!1:"bottom"===r&&"legend_position"===n?delete i.legend_position:""===r||!1===r||void 0===r||Array.isArray(r)&&0===r.length?(delete i[n],"show_legend"===n&&(delete i.legend_position,delete i.legend_show_distance)):i[n]="number"===e.type?Number(r):r,ii(this,"config-changed",{config:i})}_toggleColorPicker(t){this._colorPickerOpenFor=this._colorPickerOpenFor===t?null:t}_closeColorPicker(){null!==this._colorPickerOpenFor&&(this._colorPickerOpenFor=null)}_renderColorInput(t,e,n){const i=void 0!==n,r=i?this._getEntities()[n]:this._config,o=(r?r[e]:"")||"";let s=o;if("string"==typeof o&&o.startsWith("var("))try{const t=o.substring(4,o.length-1);s=getComputedStyle(this).getPropertyValue(t).trim()}catch(t){console.error("Failed to resolve CSS variable",o,t),s="#000000"}const a=i?`${e}_${n}`:e,l=this._colorPickerOpenFor===a;return V`
      <div class="color-input-wrapper" data-picker-id=${a}>
        <ha-textfield
          .label=${t}
          .value=${o}
          .configValue=${e}
          data-index=${n}
          .placeholder=${"e.g., #ff0000 or var(--primary-color)"}
          @input=${i?this._entityAttributeChanged:this._valueChanged}
          @click=${()=>this._toggleColorPicker(a)}
        >
          ${o?V`<ha-icon-button
                slot="trailingIcon"
                class="clear-button"
                .label=${"Clear"}
                @click=${t=>{if(t.stopPropagation(),i){const t=[...this._getEntities()],i={...t[n]};delete i[e],t[n]=i,ii(this,"config-changed",{config:{...this._config,entities:t}})}else{const t={...this._config};delete t[e],ii(this,"config-changed",{config:t})}this._closeColorPicker()}}
                title="Clear color"
              >
                <ha-icon icon="mdi:close"></ha-icon>
              </ha-icon-button>`:F}
        </ha-textfield>
        <div
          class="color-preview"
          style="background-color: ${s||"transparent"}"
          @click=${()=>this._toggleColorPicker(a)}
        ></div>
        ${l?V`
              <div class="color-picker-popup">
                <hex-color-picker
                  .configValue=${e}
                  data-index=${n}
                  .color=${s||"#000000"}
                  @color-changed=${i?this._entityAttributeChanged:this._valueChanged}
                ></hex-color-picker>
              </div>
            `:F}
      </div>
    `}_getEntities(){return this._config.entities?.map(t=>"string"==typeof t?{entity:t}:t)||[]}_addEntity(){const t=[...this._getEntities(),{entity:""}];ii(this,"config-changed",{config:{...this._config,entities:t}})}_removeEntity(t){const e=[...this._getEntities()];e.splice(t,1),ii(this,"config-changed",{config:{...this._config,entities:e}})}_entityAttributeChanged(t){if(!this._config||!this.hass||null===this._editingIndex)return;const e=t.target,n=Number(e.dataset.index),i=e.configValue;if(isNaN(n))return;const r=[...this._getEntities()],o={...r[n]};let s;s="value-changed"===t.type||"color-changed"===t.type?t.detail.value:e.value,""===s||void 0===s?delete o[i]:o[i]=s,r[n]=o,ii(this,"config-changed",{config:{...this._config,entities:r}})}_entityValueChanged(t){const e=t.target,n=e.index,i=[...this._getEntities()];i[n]={...i[n],entity:e.value},ii(this,"config-changed",{config:{...this._config,entities:i}})}_editEntity(t){this._editingIndex=t,this.requestUpdate()}_goBack(){this._editingIndex=null,this.requestUpdate()}_renderEntityEditor(){if(null===this._editingIndex)return F;const t=this._getEntities()[this._editingIndex];if(!t)return F;const e=this.hass.states[t.entity],n=t.name||e?.attributes.friendly_name||t.entity;return V`
      <div class="card-content card-config">
        <div class="header">
          <ha-icon-button @click=${this._goBack}>
            <ha-icon icon="mdi:arrow-left"></ha-icon>
          </ha-icon-button>
          <span class="title">${n}</span>
        </div>
        <div class="option-group">
          <ha-textfield
            .label=${We(this.hass,"component.radar-card.editor.name")}
            .value=${t.name||""}
            .configValue=${"name"}
            data-index=${this._editingIndex}
            @input=${this._entityAttributeChanged}
          ></ha-textfield>
          ${this._renderColorInput(We(this.hass,"component.radar-card.editor.color"),"color",this._editingIndex)}
        </div>
      </div>
    `}render(){return this.hass&&this._config?null!==this._editingIndex?V`<ha-card>${this._renderEntityEditor()}</ha-card>`:V`
      <ha-card>
        <div class="card-content card-config">
          <div class="option-group">
            <div class="option-group-title">${We(this.hass,"component.radar-card.editor.data")}</div>
            <ha-textfield
              .label=${We(this.hass,"component.radar-card.editor.title")}
              .value=${this._config.title||""}
              .configValue=${"title"}
              @input=${this._valueChanged}
            ></ha-textfield>
            <div class="option-row">
              <ha-switch
                .checked=${!0===this._config.auto_radar_max_distance}
                .configValue=${"auto_radar_max_distance"}
                @change=${this._valueChanged}
              ></ha-switch>
              <label class="mdc-label"
                >${We(this.hass,"component.radar-card.editor.auto_radar_max_distance")}</label
              >
            </div>
            ${this._config.auto_radar_max_distance?F:V`
                  <ha-textfield
                    .label=${We(this.hass,"component.radar-card.editor.radar_max_distance")}
                    type="number"
                    .value=${this._config.radar_max_distance||""}
                    .configValue=${"radar_max_distance"}
                    @input=${this._valueChanged}
                  ></ha-textfield>
                `}
            <div class="side-by-side">
              <ha-textfield
                .label=${We(this.hass,"component.radar-card.editor.center_latitude")}
                type="number"
                .value=${this._config.center_latitude||""}
                .configValue=${"center_latitude"}
                @input=${this._valueChanged}
                step="any"
              ></ha-textfield>
              <ha-textfield
                .label=${We(this.hass,"component.radar-card.editor.center_longitude")}
                type="number"
                .value=${this._config.center_longitude||""}
                .configValue=${"center_longitude"}
                @input=${this._valueChanged}
                step="any"
              ></ha-textfield>
            </div>
          </div>
          <div class="option-group">
            <div class="option-group-title">${We(this.hass,"component.radar-card.editor.appearance")}</div>
            <div class="side-by-side">
              ${this._renderColorInput(We(this.hass,"component.radar-card.editor.grid_color"),"grid_color",void 0)}
              ${this._renderColorInput(We(this.hass,"component.radar-card.editor.font_color"),"font_color",void 0)}
            </div>
            ${this._renderColorInput(We(this.hass,"component.radar-card.editor.entity_color"),"entity_color",void 0)}
            <div class="option-row">
              <ha-switch
                .checked=${!1!==this._config.show_grid_labels}
                .configValue=${"show_grid_labels"}
                @change=${this._valueChanged}
              ></ha-switch>
              <label class="mdc-label">${We(this.hass,"component.radar-card.editor.show_grid_labels")}</label>
            </div>
            <div class="option-row">
              <ha-switch
                .checked=${!1!==this._config.points_clickable}
                .configValue=${"points_clickable"}
                @change=${this._valueChanged}
              ></ha-switch>
              <label class="mdc-label">${We(this.hass,"component.radar-card.editor.points_clickable")}</label>
            </div>
            <div class="option-row">
              <ha-switch
                .checked=${!0===this._config.show_legend}
                .configValue=${"show_legend"}
                @change=${this._valueChanged}
              ></ha-switch>
              <label class="mdc-label">${We(this.hass,"component.radar-card.editor.show_legend")}</label>
            </div>
            ${this._config.show_legend?V`
                  <ha-select
                    .label=${We(this.hass,"component.radar-card.editor.legend_position")}
                    .value=${this._config.legend_position||"bottom"}
                    .configValue=${"legend_position"}
                    @selected=${this._valueChanged}
                    @closed=${t=>t.stopPropagation()}
                  >
                    <mwc-list-item value="bottom"
                      >${We(this.hass,"component.radar-card.editor.legend_positions.bottom")}</mwc-list-item
                    >
                    <mwc-list-item value="right"
                      >${We(this.hass,"component.radar-card.editor.legend_positions.right")}</mwc-list-item
                    >
                    <mwc-list-item value="left"
                      >${We(this.hass,"component.radar-card.editor.legend_positions.left")}</mwc-list-item
                    >
                  </ha-select>
                  <div class="option-row">
                    <ha-switch
                      .checked=${!0===this._config.legend_show_distance}
                      .configValue=${"legend_show_distance"}
                      @change=${this._valueChanged}
                    ></ha-switch>
                    <label class="mdc-label"
                      >${We(this.hass,"component.radar-card.editor.legend_show_distance")}</label
                    >
                  </div>
                `:F}
          </div>

          <div class="option-group entities">
            <div class="option-group-title">${We(this.hass,"component.radar-card.editor.entities")}</div>
            ${this._getEntities().map((t,e)=>V`
                <div class="entity-row">
                  <ha-entity-picker
                    .hass=${this.hass}
                    .value=${t.entity}
                    .configValue=${"entities"}
                    .index=${e}
                    @value-changed=${this._entityValueChanged}
                    allow-custom-entity
                  ></ha-entity-picker>
                  <ha-icon-button .label=${"Edit"} @click=${()=>this._editEntity(e)}>
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </ha-icon-button>
                  <ha-icon-button .label=${"Remove"} @click=${()=>this._removeEntity(e)}>
                    <ha-icon icon="mdi:close"></ha-icon>
                  </ha-icon-button>
                </div>
              `)}
            <ha-button @click=${this._addEntity}>
              <ha-icon icon="mdi:plus" slot="icon"></ha-icon>
              ${We(this.hass,"component.radar-card.editor.add_entity")}
            </ha-button>
          </div>
        </div>
      </ha-card>
    `:V``}static{this.styles=a`
    ${s(Ui)}
  `}};t([dt({attribute:!1})],zi.prototype,"hass",void 0),t([pt()],zi.prototype,"_config",void 0),t([pt()],zi.prototype,"_colorPickerOpenFor",void 0),t([pt()],zi.prototype,"_editingIndex",void 0),zi=t([ct("radar-card-editor")],zi);var ji=Object.freeze({__proto__:null,get RadarCardEditor(){return zi}});export{ci as RadarCard};
